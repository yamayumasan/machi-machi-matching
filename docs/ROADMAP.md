# 開発ロードマップ

## 全体スケジュール

```
Phase 1: MVP開発（2-3ヶ月）
├── Week 1-2:   環境構築・基盤整備
├── Week 3-4:   認証・ユーザー管理
├── Week 5-6:   やりたいこと表明機能
├── Week 7-8:   募集機能
├── Week 9-10:  マッチング・オファー機能
└── Week 11-12: グループ・チャット機能

Phase 2: 改善・追加機能（1-2ヶ月）
├── プッシュ通知
├── UI/UX改善
└── バグ修正・安定化

Phase 3: ローンチ準備（1ヶ月）
├── テスト
├── デプロイ
└── 初期ユーザー獲得
```

---

## Phase 1: MVP開発

### Week 1-2: 環境構築・基盤整備

#### 目標
- 開発環境の構築
- プロジェクト基盤の整備
- DB設計の実装

#### タスク

| タスク | 詳細 | 見積もり |
|--------|------|---------|
| monorepo構築 | pnpm workspace設定 | 2h |
| フロントエンド初期化 | Vue 3 + Vite + TypeScript | 2h |
| バックエンド初期化 | Fastify + tRPC | 2h |
| 共有パッケージ設定 | types, schemas | 1h |
| ESLint/Prettier設定 | コード品質管理 | 1h |
| Supabase設定 | プロジェクト作成、DB接続 | 1h |
| Prismaスキーマ作成 | 全テーブル定義 | 3h |
| 初期マイグレーション | DB作成 | 1h |
| カテゴリ初期データ投入 | Seed作成 | 1h |
| tRPC接続確認 | Frontend ↔ Backend | 2h |

#### 成果物
- [ ] 動作する開発環境
- [ ] DBスキーマ完成
- [ ] Frontend ↔ Backend の疎通確認

---

### Week 3-4: 認証・ユーザー管理

#### 目標
- ユーザー登録・ログイン機能
- プロフィール設定
- 初期設定（オンボーディング）

#### タスク

| タスク | 詳細 | 見積もり |
|--------|------|---------|
| Supabase Auth設定 | Google/LINE OAuth | 3h |
| ログイン画面実装 | UI + ロジック | 3h |
| 新規登録画面実装 | メール登録 | 2h |
| 認証状態管理 | Pinia store | 2h |
| プロフィール設定画面 | ニックネーム、アイコン等 | 3h |
| カテゴリ選択画面 | 複数選択UI | 2h |
| エリア選択画面 | 東京/仙台選択 | 1h |
| オンボーディングフロー | Step形式 | 2h |
| ユーザーAPI実装 | CRUD | 3h |
| マイページ実装 | プロフィール表示 | 2h |

#### 成果物
- [ ] Google/LINE でログイン可能
- [ ] 初期設定フロー完成
- [ ] マイページ表示

---

### Week 5-6: やりたいこと表明機能

#### 目標
- 「やりたいこと」の作成・管理
- 表明の自動期限切れ

#### タスク

| タスク | 詳細 | 見積もり |
|--------|------|---------|
| やりたいこと作成モーダル | カテゴリ、時期、ひとこと | 3h |
| やりたいこと一覧画面 | 自分の表明リスト | 2h |
| 期限延長機能 | ボタンで延長 | 1h |
| 削除機能 | 手動削除 | 1h |
| ホーム画面への表示 | 今やりたいこと表示 | 2h |
| WantToDo API実装 | CRUD | 3h |
| 期限切れ処理 | バッチ or トリガー | 2h |
| バリデーション | Zod スキーマ | 1h |

#### 成果物
- [ ] やりたいこと表明の作成・表示・削除
- [ ] ホーム画面に表示
- [ ] 期限切れの自動処理

---

### Week 7-8: 募集機能

#### 目標
- 募集の作成・一覧・詳細表示
- 募集の締め切り

#### タスク

| タスク | 詳細 | 見積もり |
|--------|------|---------|
| 募集作成画面 | フォーム実装 | 4h |
| 募集一覧画面 | カード形式リスト | 3h |
| フィルタリング | カテゴリ、エリア | 2h |
| 募集詳細画面 | 詳細表示 | 2h |
| 締め切り機能（手動） | ステータス変更 | 1h |
| 締め切り機能（自動） | 人数到達時 | 2h |
| Recruitment API実装 | CRUD | 4h |
| 自分の募集管理 | 編集・削除 | 2h |

#### 成果物
- [ ] 募集の作成・一覧・詳細
- [ ] カテゴリ・エリアでフィルタ
- [ ] 募集の締め切り

---

### Week 9-10: マッチング・オファー機能

#### 目標
- ユーザー提案アルゴリズム
- オファー送信・受信

#### タスク

| タスク | 詳細 | 見積もり |
|--------|------|---------|
| マッチングアルゴリズム実装 | スコア計算 | 4h |
| ユーザー提案画面 | 募集作成後に表示 | 3h |
| オファー送信機能 | ワンタップ送信 | 2h |
| オファー受信一覧 | ホーム画面に表示 | 2h |
| オファー応答 | 参加/パス | 2h |
| 募集マッチ通知 | 表明にマッチする募集 | 3h |
| Offer API実装 | CRUD | 3h |
| 通知API実装 | 作成・既読 | 2h |

#### マッチングスコア計算

```typescript
function calculateMatchScore(user: User, recruitment: Recruitment): number {
  let score = 0;
  
  // カテゴリマッチ（必須）
  if (!user.categories.includes(recruitment.categoryId)) {
    return 0;
  }
  score += 30;
  
  // エリアマッチ（必須）
  if (user.area !== recruitment.area) {
    return 0;
  }
  score += 20;
  
  // やりたいこと表明中ブースト（重要）
  const activeWantToDo = user.wantToDos.find(
    w => w.categoryId === recruitment.categoryId && w.status === 'ACTIVE'
  );
  if (activeWantToDo) {
    score += 40; // 大幅ブースト
    
    // 時期マッチでさらにブースト
    if (isTimingMatch(activeWantToDo.timing, recruitment.datetime)) {
      score += 10;
    }
  }
  
  return score;
}
```

#### 成果物
- [ ] 募集作成後にユーザー提案
- [ ] オファー送受信
- [ ] 表明にマッチする募集の通知

---

### Week 11-12: グループ・チャット機能

#### 目標
- グループ自動作成
- リアルタイムチャット

#### タスク

| タスク | 詳細 | 見積もり |
|--------|------|---------|
| グループ自動作成 | オファー承諾時 | 2h |
| グループ一覧画面 | 参加中グループ | 2h |
| グループ詳細画面 | メンバー表示 | 2h |
| Socket.io設定 | サーバー・クライアント | 3h |
| チャットUI実装 | メッセージ表示 | 4h |
| メッセージ送信 | リアルタイム送信 | 3h |
| 未読管理 | 未読カウント表示 | 2h |
| Group/Message API | CRUD | 3h |

#### 成果物
- [ ] オファー承諾でグループ作成
- [ ] リアルタイムチャット動作

---

## Phase 2: 改善・追加機能

### Week 13-16: 追加機能・改善

| タスク | 詳細 | 優先度 |
|--------|------|--------|
| プッシュ通知 | Firebase Cloud Messaging | ★★★★☆ |
| UI/UX改善 | ユーザーテストに基づく改善 | ★★★★☆ |
| レスポンシブ対応 | モバイル最適化 | ★★★★☆ |
| エラーハンドリング強化 | ユーザーフレンドリーなエラー | ★★★☆☆ |
| ローディング状態 | スケルトンUI等 | ★★★☆☆ |
| パフォーマンス改善 | クエリ最適化 | ★★★☆☆ |
| アクセシビリティ | キーボード操作等 | ★★☆☆☆ |

---

## Phase 3: ローンチ準備

### Week 17-20: テスト・デプロイ

| タスク | 詳細 | 見積もり |
|--------|------|---------|
| E2Eテスト作成 | Playwright | 8h |
| ユニットテスト追加 | Vitest | 4h |
| 本番環境構築 | Vercel + Railway | 4h |
| 環境変数設定 | 本番用設定 | 2h |
| ドメイン設定 | DNS設定 | 1h |
| SSL証明書 | HTTPS対応 | 1h |
| 監視設定 | エラートラッキング | 2h |
| ベータテスト | 知人に使ってもらう | - |
| フィードバック対応 | バグ修正 | - |

---

## マイルストーン

| マイルストーン | 期限 | 達成条件 |
|---------------|------|---------|
| **M1: 環境構築完了** | Week 2 | 開発環境動作、DB接続確認 |
| **M2: 認証完了** | Week 4 | ログイン・オンボーディング動作 |
| **M3: コア機能完了** | Week 10 | 表明・募集・オファーが動作 |
| **M4: MVP完成** | Week 12 | 全機能動作、チャット含む |
| **M5: ベータリリース** | Week 16 | 本番環境で限定公開 |
| **M6: 正式リリース** | Week 20 | 一般公開 |

---

## リスクと対策

| リスク | 影響 | 対策 |
|--------|------|------|
| OAuth設定の複雑さ | 認証実装遅延 | 先にメール認証を実装、OAuth は後から追加 |
| リアルタイム通信の難易度 | チャット実装遅延 | 最初はポーリングで実装、Socket.io は後から |
| マッチングアルゴリズムの精度 | UX低下 | シンプルなルールベースから開始 |
| モチベーション低下 | 開発停滞 | 小さなマイルストーンを設定、達成感を得る |

---

## 開発の進め方

### 1日の流れ（理想）

```
- 30分: 前日の振り返り、今日のタスク確認
- 2-3時間: 集中開発タイム
- 15分: 休憩、コミット
- 1-2時間: 追加開発 or ドキュメント整備
```

### Git運用

- `main`: 本番ブランチ
- `develop`: 開発ブランチ
- `feature/*`: 機能ブランチ

```bash
# 機能開発の流れ
git checkout develop
git checkout -b feature/want-to-do
# 開発...
git add .
git commit -m "feat: やりたいこと表明機能を追加"
git push origin feature/want-to-do
# PRを作成してマージ
```

### コミットメッセージ規約

```
feat: 新機能
fix: バグ修正
docs: ドキュメント
style: フォーマット
refactor: リファクタリング
test: テスト
chore: その他
```
